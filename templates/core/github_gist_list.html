{% extends 'core/base.html' %}
{% block title %} {{page_title}} {% endblock %}
{% block extra_css %}
<style type="text/css">
  .github_gist__image {
    height: 6rem;
    border-radius: 50%;
    width: 6rem;
    object-fit: cover;
  }
</style>
{% endblock %}

{% block content %}

<div class="container">

  <div class="row px-md-5">
    <div class="col-12 pb-1 border-bottom">
      <p class="text-success text-center display-6">{{ category_slug|upper }}</p>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12">

      <div class="row justify-content-center">

        {% if all_github_gists %}
        {% for github_gist in all_github_gists %}
        <div class="col-12 col-md-6 col-xl-4 pb-4 pt-3">
          <a target="_blank" rel="noreferrer" href="{{ github_gist.url }}" class="text-decoration-none text-reset">
            <div
              class="card neumorphic__card text-center text-{% cycle 'light' 'light' 'light' 'light' 'dark' 'light' %} bg-{% cycle 'success' 'dark' 'primary' 'danger' 'warning' 'secondary' 'info' %}"
              style="height: 100%;">
              <div class="card-header d-flex flex-wrap justify-content-center align-items-center">
                <h5 class="card-title w-100">{{ github_gist.title }} <i class="bi bi-folder-symlink-fill px-1"></i></h5>
                <!-- {% if github_gist.thumbnail %}
                    <img src="{{ github_gist.thumbnail.url }}" class="github_gist__image my-2" alt="thumbnail">
                  {% endif %} -->
                <!-- {% if github_gist.description %}
                    <p class="card-text">{{ github_gist.description }}</p>
                  {% endif %} -->
              </div>
              <div class="card-body pb-4 d-flex align-items-center justify-content-center flex-wrap"
                style="height: 100%;">
                {% for category_name in github_gist.category.all %}
                <a rel="noreferrer" href="{% url 'github_gist_list_view' category_name.slug %}"
                  class="text-decoration-none text-reset me-1">
                  <small class="text-muted badge rounded-pill bg-light">
                    {{ category_name }}
                  </small>
                </a>
                {% endfor %}
              </div>
              {% if github_gist.added_by.full_name %}
              <div class="card-footer p-1 d-flex align-items-end justify-content-center flex-wrap"
                style="height: 100%;">
                <a target="_blank" rel="noreferrer" {% if github_gist.added_by.website %} href="{{ github_gist.added_by.website }}" {% endif %}
                  class="text-decoration-none text-reset me-1">
                  <small class="text-light badge bg-dark">
                    by {{ github_gist.added_by.full_name }}
                  </small>
                </a>
              </div>
              {% endif %}
            </div>
          </a>
        </div>
        {% endfor %}
        <div class="col-12 text-center py-4">
          <a href="{% if request.user.is_authenticated %}{% url 'github_gist_create_view' %}{% else %}{% url 'signin_view' %}{% endif %}"
            class="text-success text-decoration-none neumorphic__button btn" data-bs-toggle="tooltip"
            data-bs-placement="bottom" title="Add more GitHub Gist">
            <i class="bi bi-plus-circle-fill display-6"></i>
          </a>
        </div>
        {% else %}
        <div class="col-12 row text-center mx-auto" id="no_results_text">
          <p class="display-6 text-danger m-0">Oops! no results to display</p>
          <p class="text-muted my-5 h4">But this is not it, you can add more GitHub Gist by yourself.</p>
          <p>
            <a href="{% url 'github_gist_create_view' %}" class="text-success text-decoration-none neumorphic__button btn">
              <i class="bi bi-plus-circle-fill display-6"></i>
            </a>
          </p>
        </div>
        {% endif %}

      </div>
    </div>
  </div>
</div>

{% endblock %}